 schemaname |       tablename       |                    policyname                    | permissive |      roles      |  cmd   |                                                                                               qual                                                                                               
------------+-----------------------+--------------------------------------------------+------------+-----------------+--------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 public     | activity_log          | Org members can view activity log                | PERMISSIVE | {authenticated} | SELECT | (org_id IN ( SELECT org_members.org_id                                                                                                                                                          +
            |                       |                                                  |            |                 |        |    FROM org_members                                                                                                                                                                             +
            |                       |                                                  |            |                 |        |   WHERE (org_members.user_id = auth.uid())))
 public     | activity_log          | Org owners can view billing logs                 | PERMISSIVE | {authenticated} | SELECT | ((category = 'billing'::text) AND (org_id IN ( SELECT org_members.org_id                                                                                                                        +
            |                       |                                                  |            |                 |        |    FROM org_members                                                                                                                                                                             +
            |                       |                                                  |            |                 |        |   WHERE ((org_members.user_id = auth.uid()) AND (org_members.role = 'owner'::org_role)))))
 public     | activity_log          | Service role can insert activity logs            | PERMISSIVE | {authenticated} | INSERT | 
 public     | activity_log          | activity_log_insert                              | PERMISSIVE | {public}        | INSERT | 
 public     | activity_log          | activity_log_select                              | PERMISSIVE | {public}        | SELECT | is_org_member(org_id)
 public     | activity_log_archive  | org_admins_view_archived_logs                    | PERMISSIVE | {public}        | SELECT | (org_id IN ( SELECT org_members.org_id                                                                                                                                                          +
            |                       |                                                  |            |                 |        |    FROM org_members                                                                                                                                                                             +
            |                       |                                                  |            |                 |        |   WHERE ((org_members.user_id = auth.uid()) AND (org_members.role = ANY (ARRAY['owner'::org_role, 'admin'::org_role])))))
 public     | activity_log_archive  | service_role_manage_archive                      | PERMISSIVE | {public}        | ALL    | ((auth.jwt() ->> 'role'::text) = 'service_role'::text)
 public     | advancing_comments    | adv_comments_insert                              | PERMISSIVE | {public}        | INSERT | 
 public     | advancing_comments    | adv_comments_select                              | PERMISSIVE | {public}        | SELECT | is_org_member(org_id)
 public     | advancing_comments    | advancing_comments_delete                        | PERMISSIVE | {public}        | DELETE | is_org_editor_and_active(org_id)
 public     | advancing_comments    | advancing_comments_insert                        | PERMISSIVE | {public}        | INSERT | 
 public     | advancing_comments    | advancing_comments_update                        | PERMISSIVE | {public}        | UPDATE | is_org_editor_and_active(org_id)
 public     | advancing_documents   | adv_docs_delete                                  | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM advancing_sessions s                                                                                                                                                                    +
            |                       |                                                  |            |                 |        |   WHERE ((s.id = advancing_documents.session_id) AND is_org_member(s.org_id))))
 public     | advancing_documents   | adv_docs_select                                  | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM advancing_sessions s                                                                                                                                                                    +
            |                       |                                                  |            |                 |        |   WHERE ((s.id = advancing_documents.session_id) AND (is_org_member(s.org_id) OR has_show_access(s.show_id, 'view'::text)))))
 public     | advancing_documents   | adv_docs_update                                  | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM advancing_sessions s                                                                                                                                                                    +
            |                       |                                                  |            |                 |        |   WHERE ((s.id = advancing_documents.session_id) AND (is_org_member(s.org_id) OR has_show_access(s.show_id, 'edit'::text)))))
 public     | advancing_documents   | adv_docs_write                                   | PERMISSIVE | {public}        | INSERT | 
 public     | advancing_documents   | advancing_documents_delete                       | PERMISSIVE | {public}        | DELETE | is_org_editor_and_active(org_id)
 public     | advancing_documents   | advancing_documents_insert                       | PERMISSIVE | {public}        | INSERT | 
 public     | advancing_documents   | advancing_documents_update                       | PERMISSIVE | {public}        | UPDATE | is_org_editor_and_active(org_id)
 public     | advancing_fields      | adv_fields_delete                                | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM advancing_sessions s                                                                                                                                                                    +
            |                       |                                                  |            |                 |        |   WHERE ((s.id = advancing_fields.session_id) AND is_org_member(s.org_id))))
 public     | advancing_fields      | adv_fields_insert                                | PERMISSIVE | {public}        | INSERT | 
 public     | advancing_fields      | adv_fields_select                                | PERMISSIVE | {public}        | SELECT | (is_org_member(org_id) OR (EXISTS ( SELECT 1                                                                                                                                                    +
            |                       |                                                  |            |                 |        |    FROM (advancing_sessions s                                                                                                                                                                   +
            |                       |                                                  |            |                 |        |      JOIN show_collaborators sc ON ((sc.show_id = s.show_id)))                                                                                                                                  +
            |                       |                                                  |            |                 |        |   WHERE ((s.id = advancing_fields.session_id) AND (sc.user_id = auth.uid())))))
 public     | advancing_fields      | adv_fields_update                                | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM advancing_sessions s                                                                                                                                                                    +
            |                       |                                                  |            |                 |        |   WHERE ((s.id = advancing_fields.session_id) AND (is_org_member(s.org_id) OR has_show_access(s.show_id, 'edit'::text)))))
 public     | advancing_fields      | advancing_fields_delete                          | PERMISSIVE | {public}        | DELETE | is_org_editor_and_active(org_id)
 public     | advancing_fields      | advancing_fields_insert                          | PERMISSIVE | {public}        | INSERT | 
 public     | advancing_fields      | advancing_fields_update                          | PERMISSIVE | {public}        | UPDATE | is_org_editor_and_active(org_id)
 public     | advancing_sessions    | adv_sessions_delete                              | PERMISSIVE | {public}        | DELETE | is_org_editor_and_active(org_id)
 public     | advancing_sessions    | adv_sessions_insert                              | PERMISSIVE | {public}        | INSERT | 
 public     | advancing_sessions    | adv_sessions_select                              | PERMISSIVE | {public}        | SELECT | (is_org_member(org_id) OR has_show_access(show_id, 'view'::text))
 public     | advancing_sessions    | adv_sessions_update                              | PERMISSIVE | {public}        | UPDATE | is_org_editor_and_active(org_id)
 public     | artists               | artists_delete                                   | PERMISSIVE | {public}        | DELETE | is_org_editor_and_active(org_id)
 public     | artists               | artists_insert                                   | PERMISSIVE | {public}        | INSERT | 
 public     | artists               | artists_select                                   | PERMISSIVE | {public}        | SELECT | is_org_member(org_id)
 public     | artists               | artists_update                                   | PERMISSIVE | {public}        | UPDATE | is_org_editor_and_active(org_id)
 public     | billing_plans         | billing_plans_select                             | PERMISSIVE | {public}        | SELECT | true
 public     | contact_commissions   | Org members can view contact commissions         | PERMISSIVE | {authenticated} | SELECT | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM (contacts                                                                                                                                                                               +
            |                       |                                                  |            |                 |        |      JOIN org_members ON ((org_members.org_id = contacts.org_id)))                                                                                                                              +
            |                       |                                                  |            |                 |        |   WHERE ((contacts.id = contact_commissions.contact_id) AND (org_members.user_id = auth.uid()))))
 public     | contact_commissions   | Org owners/admins can manage contact commissions | PERMISSIVE | {authenticated} | ALL    | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM (contacts                                                                                                                                                                               +
            |                       |                                                  |            |                 |        |      JOIN org_members ON ((org_members.org_id = contacts.org_id)))                                                                                                                              +
            |                       |                                                  |            |                 |        |   WHERE ((contacts.id = contact_commissions.contact_id) AND (org_members.user_id = auth.uid()) AND (org_members.role = ANY (ARRAY['owner'::org_role, 'admin'::org_role, 'editor'::org_role])))))
 public     | contacts              | Org members can view contacts                    | PERMISSIVE | {authenticated} | SELECT | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM org_members                                                                                                                                                                             +
            |                       |                                                  |            |                 |        |   WHERE ((org_members.org_id = contacts.org_id) AND (org_members.user_id = auth.uid()))))
 public     | contacts              | Org owners/admins can manage contacts            | PERMISSIVE | {authenticated} | ALL    | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM org_members                                                                                                                                                                             +
            |                       |                                                  |            |                 |        |   WHERE ((org_members.org_id = contacts.org_id) AND (org_members.user_id = auth.uid()) AND (org_members.role = ANY (ARRAY['owner'::org_role, 'admin'::org_role, 'editor'::org_role])))))
 public     | files                 | files_delete                                     | PERMISSIVE | {public}        | DELETE | is_org_editor_and_active(org_id)
 public     | files                 | files_insert                                     | PERMISSIVE | {public}        | INSERT | 
 public     | files                 | files_select                                     | PERMISSIVE | {public}        | SELECT | (is_org_member(org_id) OR ((session_id IS NOT NULL) AND (EXISTS ( SELECT 1                                                                                                                      +
            |                       |                                                  |            |                 |        |    FROM (advancing_sessions s                                                                                                                                                                   +
            |                       |                                                  |            |                 |        |      JOIN show_collaborators sc ON ((sc.show_id = s.show_id)))                                                                                                                                  +
            |                       |                                                  |            |                 |        |   WHERE ((s.id = files.session_id) AND (sc.user_id = auth.uid()))))))
 public     | files                 | files_update                                     | PERMISSIVE | {public}        | UPDATE | is_org_editor_and_active(org_id)
 public     | invitations           | org_editors_create_invitations                   | PERMISSIVE | {public}        | INSERT | 
 public     | invitations           | org_editors_delete_invitations                   | PERMISSIVE | {public}        | DELETE | (org_id IN ( SELECT org_members.org_id                                                                                                                                                          +
            |                       |                                                  |            |                 |        |    FROM org_members                                                                                                                                                                             +
            |                       |                                                  |            |                 |        |   WHERE ((org_members.user_id = auth.uid()) AND (org_members.role = ANY (ARRAY['owner'::org_role, 'editor'::org_role])))))
 public     | invitations           | org_editors_update_invitations                   | PERMISSIVE | {public}        | UPDATE | (org_id IN ( SELECT org_members.org_id                                                                                                                                                          +
            |                       |                                                  |            |                 |        |    FROM org_members                                                                                                                                                                             +
            |                       |                                                  |            |                 |        |   WHERE ((org_members.user_id = auth.uid()) AND (org_members.role = ANY (ARRAY['owner'::org_role, 'editor'::org_role])))))
 public     | invitations           | org_editors_view_invitations                     | PERMISSIVE | {public}        | SELECT | (org_id IN ( SELECT org_members.org_id                                                                                                                                                          +
            |                       |                                                  |            |                 |        |    FROM org_members                                                                                                                                                                             +
            |                       |                                                  |            |                 |        |   WHERE ((org_members.user_id = auth.uid()) AND (org_members.role = ANY (ARRAY['owner'::org_role, 'editor'::org_role])))))
 public     | org_feature_overrides | admin_org_feature_overrides_all                  | PERMISSIVE | {public}        | ALL    | is_supabase_admin()
 public     | org_feature_overrides | org_feature_overrides_select                     | PERMISSIVE | {public}        | SELECT | is_org_member(org_id)
 public     | org_members           | org_members_delete                               | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM org_members org_members_1                                                                                                                                                               +
            |                       |                                                  |            |                 |        |   WHERE ((org_members_1.org_id = org_members_1.org_id) AND (org_members_1.user_id = auth.uid()) AND (org_members_1.role = ANY (ARRAY['owner'::org_role, 'admin'::org_role])))))
 public     | org_members           | org_members_select                               | PERMISSIVE | {public}        | SELECT | ((auth.uid() IS NOT NULL) AND (user_id = auth.uid()))
 public     | org_members           | org_members_update                               | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM org_members org_members_1                                                                                                                                                               +
            |                       |                                                  |            |                 |        |   WHERE ((org_members_1.org_id = org_members_1.org_id) AND (org_members_1.user_id = auth.uid()) AND (org_members_1.role = ANY (ARRAY['owner'::org_role, 'admin'::org_role])))))
 public     | org_subscriptions     | admin_org_subscriptions_select                   | PERMISSIVE | {public}        | SELECT | is_supabase_admin()
 public     | org_subscriptions     | org_subscriptions_insert                         | PERMISSIVE | {public}        | INSERT | 
 public     | org_subscriptions     | org_subscriptions_select                         | PERMISSIVE | {public}        | SELECT | is_org_member(org_id)
 public     | org_subscriptions     | org_subscriptions_update                         | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM org_members                                                                                                                                                                             +
            |                       |                                                  |            |                 |        |   WHERE ((org_members.org_id = org_subscriptions.org_id) AND (org_members.user_id = auth.uid()) AND (org_members.role = 'owner'::org_role))))
 public     | organizations         | org_delete                                       | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM org_members                                                                                                                                                                             +
            |                       |                                                  |            |                 |        |   WHERE ((org_members.org_id = organizations.id) AND (org_members.user_id = auth.uid()) AND (org_members.role = 'owner'::org_role))))
 public     | organizations         | org_select                                       | PERMISSIVE | {public}        | SELECT | ((auth.uid() IS NOT NULL) AND is_org_member(id))
 public     | organizations         | org_update                                       | PERMISSIVE | {public}        | UPDATE | is_org_member(id)
 public     | parsed_contracts      | Org members can manage parsed contracts          | PERMISSIVE | {authenticated} | ALL    | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM org_members                                                                                                                                                                             +
            |                       |                                                  |            |                 |        |   WHERE ((org_members.org_id = parsed_contracts.org_id) AND (org_members.user_id = auth.uid()))))
 public     | parsed_emails         | Org members can manage parsed emails             | PERMISSIVE | {authenticated} | ALL    | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM org_members                                                                                                                                                                             +
            |                       |                                                  |            |                 |        |   WHERE ((org_members.org_id = parsed_emails.org_id) AND (org_members.user_id = auth.uid()))))
 public     | people                | Org editors can manage people                    | PERMISSIVE | {authenticated} | ALL    | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM org_members                                                                                                                                                                             +
            |                       |                                                  |            |                 |        |   WHERE ((org_members.org_id = people.org_id) AND (org_members.user_id = auth.uid()) AND (org_members.role = ANY (ARRAY['owner'::org_role, 'admin'::org_role, 'editor'::org_role])))))
 public     | people                | Org members can view all people in their org     | PERMISSIVE | {authenticated} | SELECT | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM org_members                                                                                                                                                                             +
            |                       |                                                  |            |                 |        |   WHERE ((org_members.org_id = people.org_id) AND (org_members.user_id = auth.uid()))))
 public     | people                | People can update their own profile              | PERMISSIVE | {authenticated} | UPDATE | (user_id = auth.uid())
 public     | people                | People can view their own record                 | PERMISSIVE | {authenticated} | SELECT | (user_id = auth.uid())
 public     | people                | people_delete                                    | PERMISSIVE | {public}        | DELETE | is_org_editor_and_active(org_id)
 public     | people                | people_insert                                    | PERMISSIVE | {public}        | INSERT | 
 public     | people                | people_select                                    | PERMISSIVE | {public}        | SELECT | is_org_member(org_id)
 public     | people                | people_update                                    | PERMISSIVE | {public}        | UPDATE | is_org_editor_and_active(org_id)
 public     | query_performance_log | query_performance_log_service_role               | PERMISSIVE | {service_role}  | ALL    | true
 public     | schedule_items        | schedule_items_delete                            | PERMISSIVE | {public}        | DELETE | is_org_editor_and_active(org_id)
 public     | schedule_items        | schedule_items_insert                            | PERMISSIVE | {public}        | INSERT | 
 public     | schedule_items        | schedule_items_select                            | PERMISSIVE | {public}        | SELECT | (is_org_member(org_id) OR (EXISTS ( SELECT 1                                                                                                                                                    +
            |                       |                                                  |            |                 |        |    FROM (show_collaborators sc                                                                                                                                                                  +
            |                       |                                                  |            |                 |        |      JOIN shows sh ON ((sh.id = schedule_items.show_id)))                                                                                                                                       +
            |                       |                                                  |            |                 |        |   WHERE ((sc.show_id = sh.id) AND (sc.user_id = auth.uid())))))
 public     | schedule_items        | schedule_items_update                            | PERMISSIVE | {public}        | UPDATE | is_org_editor_and_active(org_id)
 public     | show_assignments      | show_assignments_delete                          | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM shows s                                                                                                                                                                                 +
            |                       |                                                  |            |                 |        |   WHERE ((s.id = show_assignments.show_id) AND is_org_member(s.org_id))))
 public     | show_assignments      | show_assignments_insert                          | PERMISSIVE | {public}        | INSERT | 
 public     | show_assignments      | show_assignments_select                          | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM shows s                                                                                                                                                                                 +
            |                       |                                                  |            |                 |        |   WHERE ((s.id = show_assignments.show_id) AND is_org_member(s.org_id))))
 public     | show_assignments      | show_assignments_update                          | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM shows s                                                                                                                                                                                 +
            |                       |                                                  |            |                 |        |   WHERE ((s.id = show_assignments.show_id) AND is_org_member(s.org_id))))
 public     | show_collaborators    | Collaborators can view their assigned shows      | PERMISSIVE | {authenticated} | SELECT | (user_id = auth.uid())
 public     | show_collaborators    | Org editors can manage show collaborators        | PERMISSIVE | {authenticated} | ALL    | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM (shows s                                                                                                                                                                                +
            |                       |                                                  |            |                 |        |      JOIN org_members om ON ((om.org_id = s.org_id)))                                                                                                                                           +
            |                       |                                                  |            |                 |        |   WHERE ((s.id = show_collaborators.show_id) AND (om.user_id = auth.uid()) AND (om.role = ANY (ARRAY['owner'::org_role, 'admin'::org_role, 'editor'::org_role])))))
 public     | show_collaborators    | Org members can view show collaborators          | PERMISSIVE | {authenticated} | SELECT | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM (shows s                                                                                                                                                                                +
            |                       |                                                  |            |                 |        |      JOIN org_members om ON ((om.org_id = s.org_id)))                                                                                                                                           +
            |                       |                                                  |            |                 |        |   WHERE ((s.id = show_collaborators.show_id) AND (om.user_id = auth.uid()))))
 public     | show_collaborators    | show_collaborators_delete                        | PERMISSIVE | {public}        | DELETE | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM shows s                                                                                                                                                                                 +
            |                       |                                                  |            |                 |        |   WHERE ((s.id = show_collaborators.show_id) AND is_org_member(s.org_id))))
 public     | show_collaborators    | show_collaborators_insert                        | PERMISSIVE | {public}        | INSERT | 
 public     | show_collaborators    | show_collaborators_select                        | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM shows s                                                                                                                                                                                 +
            |                       |                                                  |            |                 |        |   WHERE ((s.id = show_collaborators.show_id) AND (is_org_member(s.org_id) OR has_show_access(s.id, 'view'::text)))))
 public     | show_collaborators    | show_collaborators_update                        | PERMISSIVE | {public}        | UPDATE | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM shows s                                                                                                                                                                                 +
            |                       |                                                  |            |                 |        |   WHERE ((s.id = show_collaborators.show_id) AND is_org_member(s.org_id))))
 public     | shows                 | shows_delete                                     | PERMISSIVE | {public}        | DELETE | is_org_editor_and_active(org_id)
 public     | shows                 | shows_insert                                     | PERMISSIVE | {public}        | INSERT | 
 public     | shows                 | shows_select                                     | PERMISSIVE | {public}        | SELECT | (is_org_member(org_id) OR has_show_access(id, 'view'::text))
 public     | shows                 | shows_update                                     | PERMISSIVE | {public}        | UPDATE | is_org_editor_and_active(org_id)
 public     | venue_contacts        | Org members can view venue-contact links         | PERMISSIVE | {authenticated} | SELECT | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM (venues                                                                                                                                                                                 +
            |                       |                                                  |            |                 |        |      JOIN org_members ON ((org_members.org_id = venues.org_id)))                                                                                                                                +
            |                       |                                                  |            |                 |        |   WHERE ((venues.id = venue_contacts.venue_id) AND (org_members.user_id = auth.uid()))))
 public     | venue_contacts        | Org owners/admins can manage venue-contact links | PERMISSIVE | {authenticated} | ALL    | (EXISTS ( SELECT 1                                                                                                                                                                              +
            |                       |                                                  |            |                 |        |    FROM (venues                                                                                                                                                                                 +
            |                       |                                                  |            |                 |        |      JOIN org_members ON ((org_members.org_id = venues.org_id)))                                                                                                                                +
            |                       |                                                  |            |                 |        |   WHERE ((venues.id = venue_contacts.venue_id) AND (org_members.user_id = auth.uid()) AND (org_members.role = ANY (ARRAY['owner'::org_role, 'admin'::org_role, 'editor'::org_role])))))
 public     | venues                | venues_delete                                    | PERMISSIVE | {public}        | DELETE | is_org_editor_and_active(org_id)
 public     | venues                | venues_insert                                    | PERMISSIVE | {public}        | INSERT | 
 public     | venues                | venues_select                                    | PERMISSIVE | {public}        | SELECT | is_org_member(org_id)
 public     | venues                | venues_update                                    | PERMISSIVE | {public}        | UPDATE | is_org_editor_and_active(org_id)
(95 rows)

